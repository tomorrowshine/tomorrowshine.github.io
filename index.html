<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta
      content="width=device-width,initial-scale=1,user-scalable=no"
      name="viewport"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="telephone=no,address=no" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title></title>
    <style>
      #my-lucky {
        margin: auto;
      }
    </style>
  </head>

  <body>
    <div id="my-lucky"></div>
  </body>

  <script src="https://unpkg.com/lucky-canvas@1.7.25"></script>
  <script>
    let myLucky = ''
    function init() {
      let prizes = []
      let data = [
        '10元红包',
        '感谢参与',
        'MacBook Pro16英寸',
        '古驰（GUCCI）',
        '香奈儿（Chanel）口红',
        '感谢参与',
        '50元红包',
        'Apple iPhone 14 Pro',
      ]
      data.forEach((item, index) => {
        prizes.push({
          text: item,
          background: index % 2 ? '#f9e3bb' : '#f8d384',
          fonts: [{ text: item, top: '10%', fontWeight: 300 }],
          imgs: [
            {
              src: `./images/${index}.png`,
              width: '30%',
              top: '35%',
            },
          ],
        })
      })
      myLucky = new LuckyCanvas.LuckyWheel('#my-lucky', {
        width: '300px',
        height: '300px',
        blocks: [{ padding: '13px', background: '#f6c66f' }],
        prizes: prizes,
        buttons: [
          { radius: '50px', background: '#FF9900' },
          { radius: '45px', background: '#fff' },
          { radius: '41px', background: '#f6c66f', pointer: true },
          // {
          //   radius: '35px', background: '#ffdea0',
          //   imgs: [{ src: '', width: '65%', top: '-50%' }]
          // }
        ],
        end: () => {
          system.postMessage('end')
        },
      })
    }
    init()

    function play() {
      myLucky.play()
      const res = [1, 5]
      setTimeout(() => {
        myLucky.stop(res[Math.floor(Math.random() * 2)])
      }, 3000)
    }

    system.onmessage = function (data) {
      // 开始
      play()
    }
  </script>
</html>
